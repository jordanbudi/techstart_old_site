









<!DOCTYPE html>
<html lang="en"
      data-is-home="false"
      data-is-mobile="false"
      data-supports-vr="false"
      data-supports-touch="false"
      data-site-base-url="https://techstart.github.io"
      data-site-root-path="/"
      data-site-home-url="https://techstart.github.io/"
      data-lib-home-url="https://techstart.github.io"
      data-lib-examples-url="https://techstart.github.io"
      data-title="{title} | TechStart"
      data-is-spa="false"
      data-ga-id="UA-84499800-1"
      data-aframe-version="1.0.0"
      data-docs-version="master">
  <head>
    <title>Asset Management System –  Docs  – TechStart</title>
    

<script>
  var host = window.location.protocol + '//' + window.location.hostname;
  if (window.location.protocol === 'http:' &&
      window.location.hostname === 'https://techstart.github.io') {
    window.location.href = 'https:' + window.location.href.substring(6);
  }
</script>


    <meta charset="utf-8">
    <meta name="robots" content="all">
    <meta name="description" content="TechStart – Creating Opportunities Through Computer Science">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="canonical" href="https://techstart.github.io">
    <meta property="fb:app_id" content="1535794316743373">
    <meta property="og:title" content="TechStart">
    <meta property="og:site_name" content="TechStart">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://techstart.github.io">
    <meta property="og:description" content="Creating Opportunities Through Computer Science">
    <meta property="og:image" content="http://techstart.github.io/images/card.png">
    <meta property="og:image:secure_url" content="https://techstart.github.io/images/card.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@aframevr">
    <meta name="twitter:creator" content="@aframevr">
    <meta name="twitter:title" content="TechStart">
    <meta name="twitter:description" content="Creating Opportunities Through Computer Science">
    <meta name="twitter:image" content="https://techstart.github.io/images/card.png">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="black">
    <link rel="icon" sizes="192x192" href="https://techstart.github.io/images/aframe-logo-192.png">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="https://techstart.github.io/images/aframe-logo-152.png">

    <link rel="alternate" type="application/rss+xml" title="Feed" href="https://techstart.github.io/feed.xml">

    <script src="/js/compat.js"></script>

    
      <link rel="stylesheet" href="/css/secondary.css">
    

    
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84499800-1', 'auto');
  ga('send', 'pageview');
</script>




<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("O0Trhcd2h1sVKasfJHP5JHVRZUJ8Nwev");
  analytics.page();
  }}();
</script>

  </head>
  <body data-page-layout="docs"
        data-page-type="core">
    
      <aside class="sidebar sidebar-mobile borderless-links c">
  <header id="header" class="header">
    <a href="#secondary-nav" class="mobile-nav-btn">Menu</a>
    <a id="logo" class="logo" href="/">
      <span class="logo__wordmark">TechStart</span>
    </a>
  </header>
</aside>

    
    <main id="main" class="main">
      


<!-- Navigation. -->
<aside class="sidebar borderless-links">
  

<div id="secondary-nav" class="secondary-nav">
  <header id="header" class="header">
    <a id="logo" class="logo" href="/" title="TechStart">
      <span class="logo__wordmark">TechStart</span>
    </a>
  </header>

  <ul id="nav" class="nav">
    
      <li  class="nav-item">
        <a href="/docs/1.0.0/introduction/"
           class="nav-link nav-link-docs"
           
           >
          <span>Projects</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/faq/"
           class="nav-link nav-link-docs"
           
           >
          <span>FAQS</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/community/"
           class="nav-link nav-link-docs"
           
           >
          <span>Community</span>
        </a>
      </li>
    
      <li  data-slug="slug" class="nav-item">
        <a href="https://support.oculus.com/"
           class="nav-link nav-link-docs"
            rel="external"
            title="Support">
          <span>Support</span>
        </a>
      </li>
    
  </ul>
</div>


  <div class="list">

      <!-- Version dropdown. (remove display:none) -->
      <label class="subnav-label" style = "display:none" for="docs-version"><b>Version</b></label>
      <select id="docs-version" style = "display:none" onchange="location = this.options[this.selectedIndex].getAttribute('data-href')">
        
          <option selected
                  data-href="/docs/master/introduction/">
            master
          </option>
        
          <option false
                  data-href="/docs/1.0.0/introduction/">
            1.0.0
          </option>
        
      </select>

    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/introduction/"
           class="section-title-link section-title-link-inactive">
          Introduction
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/"
               class="subnav-link">
              Introduction
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/getting-started.html"
               class="subnav-link">
              Getting Started
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/device-and-platform-support.html"
               class="subnav-link">
              Device &amp; Platform Support
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/best-practices.html"
               class="subnav-link">
              Best Practices
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/introduction/faq.html"
               class="subnav-link">
              FAQ
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/guides/"
           class="section-title-link section-title-link-inactive">
          Guides
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/"
               class="subnav-link">
              Building a Basic Scene
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/using-the-aframe-inspector.html"
               class="subnav-link">
              Using the A-Frame Inspector
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-with-components.html"
               class="subnav-link">
              Building with Components
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/using-javascript-and-dom-apis.html"
               class="subnav-link">
              Using JavaScript and DOM APIs
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/using-with-threejs.html"
               class="subnav-link">
              Using with three.js
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/writing-a-component.html"
               class="subnav-link">
              Writing a Component
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/guides/building-with-magicavoxel.html"
               class="subnav-link">
              Building with MagicaVoxel
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-active">
        <a href="/docs/master/core/"
           class="section-title-link section-title-link-active">
          Concepts and API
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/core/"
               class="subnav-link">
              Entity-Component-System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/entity.html"
               class="subnav-link">
              Entity
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/component.html"
               class="subnav-link">
              Component
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/systems.html"
               class="subnav-link">
              System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/scene.html"
               class="subnav-link">
              Scene
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/animations.html"
               class="subnav-link">
              Animations
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/mixins.html"
               class="subnav-link">
              Mixins
            </a>
          </li>
        
          <li class="subnav-item  subnav-item-current">
            <a href="/docs/master/core/asset-management-system.html"
               class="subnav-link current">
              Asset Management System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/AFRAME.html"
               class="subnav-link">
              AFRAME Globals
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/core/utils.html"
               class="subnav-link">
              Utils
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/components/"
           class="section-title-link section-title-link-inactive">
          Components
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/components/blend-model.html"
               class="subnav-link">
              blend-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/camera.html"
               class="subnav-link">
              camera
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/collada-model.html"
               class="subnav-link">
              collada-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/cursor.html"
               class="subnav-link">
              cursor
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/debug.html"
               class="subnav-link">
              debug
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/embedded.html"
               class="subnav-link">
              embedded
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/fog.html"
               class="subnav-link">
              fog
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/geometry.html"
               class="subnav-link">
              geometry
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/gltf-model.html"
               class="subnav-link">
              gltf-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/hand-controls.html"
               class="subnav-link">
              hand-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/keyboard-shortcuts.html"
               class="subnav-link">
              keyboard-shortcuts
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/light.html"
               class="subnav-link">
              light
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/look-controls.html"
               class="subnav-link">
              look-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/material.html"
               class="subnav-link">
              material
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/obj-model.html"
               class="subnav-link">
              obj-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/oculus-touch-controls.html"
               class="subnav-link">
              oculus-touch-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/pool.html"
               class="subnav-link">
              pool
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/position.html"
               class="subnav-link">
              position
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/raycaster.html"
               class="subnav-link">
              raycaster
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/rotation.html"
               class="subnav-link">
              rotation
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/scale.html"
               class="subnav-link">
              scale
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/screenshot.html"
               class="subnav-link">
              screenshot
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/shadow.html"
               class="subnav-link">
              shadow
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/sound.html"
               class="subnav-link">
              sound
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/stats.html"
               class="subnav-link">
              stats
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/text.html"
               class="subnav-link">
              text
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/tracked-controls.html"
               class="subnav-link">
              tracked-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/visible.html"
               class="subnav-link">
              visible
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/vive-controls.html"
               class="subnav-link">
              vive-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/vr-mode-ui.html"
               class="subnav-link">
              vr-mode-ui
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/components/wasd-controls.html"
               class="subnav-link">
              wasd-controls
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <a href="/docs/master/primitives/"
           class="section-title-link section-title-link-inactive">
          Primitives
        </a>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/"
               class="subnav-link">
              Introduction
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-box.html"
               class="subnav-link">
              &lt;a-box&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-camera.html"
               class="subnav-link">
              &lt;a-camera&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-circle.html"
               class="subnav-link">
              &lt;a-circle&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-collada-model.html"
               class="subnav-link">
              &lt;a-collada-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cone.html"
               class="subnav-link">
              &lt;a-cone&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cursor.html"
               class="subnav-link">
              &lt;a-cursor&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-curvedimage.html"
               class="subnav-link">
              &lt;a-curvedimage&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-cylinder.html"
               class="subnav-link">
              &lt;a-cylinder&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-dodecahedron.html"
               class="subnav-link">
              &lt;a-dodecahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-gltf-model.html"
               class="subnav-link">
              &lt;a-gltf-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-icosahedron.html"
               class="subnav-link">
              &lt;a-icosahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-image.html"
               class="subnav-link">
              &lt;a-image&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-light.html"
               class="subnav-link">
              &lt;a-light&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-obj-model.html"
               class="subnav-link">
              &lt;a-obj-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-octahedron.html"
               class="subnav-link">
              &lt;a-octahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-plane.html"
               class="subnav-link">
              &lt;a-plane&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-ring.html"
               class="subnav-link">
              &lt;a-ring&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sky.html"
               class="subnav-link">
              &lt;a-sky&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sound.html"
               class="subnav-link">
              &lt;a-sound&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-sphere.html"
               class="subnav-link">
              &lt;a-sphere&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-tetrahedron.html"
               class="subnav-link">
              &lt;a-tetrahedron&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-text.html"
               class="subnav-link">
              &lt;a-text&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-torus-knot.html"
               class="subnav-link">
              &lt;a-torus-knot&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-torus.html"
               class="subnav-link">
              &lt;a-torus&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-video.html"
               class="subnav-link">
              &lt;a-video&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/master/primitives/a-videosphere.html"
               class="subnav-link">
              &lt;a-videosphere&gt;
            </a>
          </li>
        
      </ol>
    
  </div>
</aside>

<!-- Documentation. -->
<div class="content content--structured content--core copy">
  <div class="copy__wrap">
    <p class="page__section">
      <a href="/docs/master/core/" class="borderless-link">
        master &rsaquo; Concepts and API
      </a>
    </p>
    
      <blockquote>
<p><strong>Note:</strong> The <code>master</code> version of the documentation tracks unstable development happening.</p>
</blockquote>

    
    <h1 class="page__title">Asset Management System</h1>

    
    
      <p>A-Frame has an asset management system that allows us to place our assets in
one place and to preload and cache assets for better performance.</p>
<p>Games and rich 3D experiences traditionally preload their assets, such as
models or textures, before rendering their scenes. This makes sure that assets
aren’t missing visually, and this is beneficial for performance to ensure
scenes don’t try to fetch assets while rendering.</p>
<p>We place assets within <code>&lt;a-assets&gt;</code>, and we place <code>&lt;a-assets&gt;</code> within
<code>&lt;a-scene&gt;</code>. Assets include:</p>
<ul>
<li><code>&lt;a-asset-item&gt;</code> - Miscellaneous assets such as 3D models and materials</li>
<li><code>&lt;audio&gt;</code> - Sound files</li>
<li><code>&lt;img&gt;</code> - Image textures</li>
<li><code>&lt;video&gt;</code> - Video textures</li>
</ul>
<p>The scene won’t render or initialize until the browser fetches (or errors out)
all the assets or the asset system reaches the timeout.</p>

      


  <h2>Table of Contents</h2>

  <ul id="toc">
    
      <li>
        <a href="#example">Example</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#preloading-audio-and-video">Preloading Audio and Video</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#setting-a-timeout">Setting a Timeout</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#events">Events</a>

        <!-- Nested. -->
        
          <ul>
            
              <li><a href="#"></a></li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#load-progress-on-individual-assets">Load Progress on Individual Assets</a>

        <!-- Nested. -->
        
          <ul>
            
              <li><a href="#lt-a-asset-item-gt">&lt;a-asset-item&gt;</a></li>
            
              <li><a href="#lt-img-gt">&lt;img&gt;</a></li>
            
              <li><a href="#htmlmediaelement">HTMLMediaElement</a></li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#specifying-response-type">Specifying Response Type</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#how-it-works-internally">How It Works Internally</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li>
        <a href="#accessing-the-fileloader-and-cache">Accessing the FileLoader and Cache</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
  </ul>


      
<h2 id="example"><a href="#example" class="headerlink" title="Example"></a>Example</h2><p>We can define our assets in <code>&lt;a-assets&gt;</code> and point to those assets from our
entities using selectors:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Asset management system. --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-asset-item</span> <span class="attr">id</span>=<span class="string">"horse-obj"</span> <span class="attr">src</span>=<span class="string">"horse.obj"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-asset-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-asset-item</span> <span class="attr">id</span>=<span class="string">"horse-mtl"</span> <span class="attr">src</span>=<span class="string">"horse.mtl"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-asset-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-mixin</span> <span class="attr">id</span>=<span class="string">"giant"</span> <span class="attr">scale</span>=<span class="string">"5 5 5"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-mixin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">"neigh"</span> <span class="attr">src</span>=<span class="string">"neigh.mp3"</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"advertisement"</span> <span class="attr">src</span>=<span class="string">"ad.png"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"kentucky-derby"</span> <span class="attr">src</span>=<span class="string">"derby.mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Scene. --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-plane</span> <span class="attr">src</span>=<span class="string">"advertisement"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-plane</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-sound</span> <span class="attr">src</span>=<span class="string">"#neigh"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sound</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">geometry</span>=<span class="string">"primitive: plane"</span> <span class="attr">material</span>=<span class="string">"src: #kentucky-derby"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">mixin</span>=<span class="string">"giant"</span> <span class="attr">obj-model</span>=<span class="string">"obj: #horse-obj; mtl: #horse-mtl"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure>
<p>The scene and its entities will wait for every asset (up until the timeout)
before initializing and rendering.</p>
<h2 id="cross-origin-resource-sharing-cors"><a href="#cross-origin-resource-sharing-cors" class="headerlink" title="Cross-Origin Resource Sharing (CORS)"></a>Cross-Origin Resource Sharing (CORS)</h2><p>Since A-Frame fetches assets using <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest" target="_blank" rel="external">XHRs</a>, browser security requires the
browser to serve assets with <a href="https://wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank" rel="external">cross-origin resource sharing (CORS)
headers</a> if the asset is on a different domain. Otherwise, we’d have
to host assets on the same origin as the scene.</p>
<p>For some options, <a href="https://pages.github.com/" target="_blank" rel="external">GitHub Pages</a> serves everything with CORS headers.
We recommend GitHub Pages as a simple deployment platform.  Or you could also
upload assets using the <a href="https://cdn.aframe.io" target="_blank" rel="external">A-Frame + Uploadcare Uploader</a>, a service
that serves files with CORS headers set.</p>
<p>Given that <a href="https://developer.mozilla.org/docs/Web/HTML/CORS_enabled_image" target="_blank" rel="external">CORS headers</a> <em>are</em> set, <code>&lt;a-assets&gt;</code> will automatically set
<code>crossorigin</code> attributes on media elements (e.g., <code>&lt;audio&gt;</code>, <code>&lt;img&gt;</code>,
<code>&lt;video&gt;</code>) if it detects the resource is on a different domain.</p>
<h2 id="preloading-audio-and-video"><a href="#preloading-audio-and-video" class="headerlink" title="Preloading Audio and Video"></a>Preloading Audio and Video</h2><p>Audio and video assets will only block the scene if we set <code>autoplay</code> or if we
set <code>preload=&quot;auto&quot;</code>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- These will not block. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"blockus.mp3"</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"loadofblocks.mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- These will block. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"blocky.mp3"</span> <span class="attr">autoplay</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"blockiscooking.mp4"</span> <span class="attr">preload</span>=<span class="string">"auto"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="setting-a-timeout"><a href="#setting-a-timeout" class="headerlink" title="Setting a Timeout"></a>Setting a Timeout</h2><p>We can set a timeout that when reached, the scene will begin rendering and
entities will begin initializing regardless of whether all the assets have
loaded. The default timeout is 3 seconds. To set a different timeout, we just
pass in the number of milliseconds to the <code>timeout</code> attribute:</p>
<p>If some assets are taking a long time to load, we may want to set an
appropriate timeout such that the user isn’t waiting all day in case their
network is slow.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-assets</span> <span class="attr">timeout</span>=<span class="string">"10000"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- You got until the count of 10 to load else the show will go on without you. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"bigimage.png"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a-asset</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="events"><a href="#events" class="headerlink" title="Events"></a>Events</h2><p>Since <code>&lt;a-assets&gt;</code> and <code>&lt;a-asset-item&gt;</code> are <em>nodes</em> in A-Frame, they will emit
the <code>loaded</code> event when they say they have finished loading.</p>
<h3 id=""><a href="#" class="headerlink" title=""></a><a-assets></a-assets></h3><table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>loaded</td>
<td>All assets were loaded, or assets timed out.</td>
</tr>
<tr>
<td>timeout</td>
<td>Assets timed out.</td>
</tr>
</tbody>
</table>
<h2 id="load-progress-on-individual-assets"><a href="#load-progress-on-individual-assets" class="headerlink" title="Load Progress on Individual Assets"></a>Load Progress on Individual Assets</h2><h3 id="lt-a-asset-item-gt"><a href="#lt-a-asset-item-gt" class="headerlink" title="&lt;a-asset-item&gt;"></a><code>&lt;a-asset-item&gt;</code></h3><p><code>&lt;a-asset-item&gt;</code> invokes the <a href="https://threejs.org/docs/#Reference/Loaders/FileLoader" target="_blank" rel="external">three.js
FileLoader</a>.  We can use
<code>&lt;a-asset-item&gt;</code> for any file type. When finished, it will set its <code>data</code>
member with the text response.</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>Fetch error. Event detail contains <code>xhr</code> with <code>XMLHttpRequest</code> instance.</td>
</tr>
<tr>
<td>progress</td>
<td>Emitted on progress. Event detail contains <code>xhr</code> with <code>XMLHttpRequest</code> instance, <code>loadedBytes</code>, and <code>totalBytes</code>.</td>
</tr>
<tr>
<td>loaded</td>
<td>Asset pointed to by <code>src</code> was loaded.</td>
</tr>
</tbody>
</table>
<h3 id="lt-img-gt"><a href="#lt-img-gt" class="headerlink" title="&lt;img&gt;"></a><code>&lt;img&gt;</code></h3><p>Images are a standard DOM element so we can listen to the standard DOM events.</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>load</td>
<td>Image was loaded.</td>
</tr>
</tbody>
</table>
<h3 id="htmlmediaelement"><a href="#htmlmediaelement" class="headerlink" title="HTMLMediaElement"></a><code>HTMLMediaElement</code></h3><p>Audio and video assets are <a href="https://developer.mozilla.org/docs/Web/API/HTMLMediaElement" target="_blank" rel="external"><code>HTMLMediaElement</code></a>s. The browser triggers
particular events on these elements; noted here for convenience:</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>There was an error loading the asset.</td>
</tr>
<tr>
<td>loadeddata</td>
<td>Progress.</td>
</tr>
<tr>
<td>progress</td>
<td>Progress.</td>
</tr>
</tbody>
</table>
<p>A-Frame uses these progress events, comparing how much time the browser
buffered with the duration of the asset, to detect when the asset becomes loaded.</p>
<h2 id="specifying-response-type"><a href="#specifying-response-type" class="headerlink" title="Specifying Response Type"></a>Specifying Response Type</h2><p>Content fetched by <code>&lt;a-asset-item&gt;</code> will be returned as plain text. If we want
to use a different response type such as <code>arraybuffer</code>, use <code>&lt;a-asset-item&gt;</code>‘s
<code>response-type</code> attribute:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-asset-item</span> <span class="attr">response-type</span>=<span class="string">"arraybuffer"</span> <span class="attr">src</span>=<span class="string">"model.gltf"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-asset-item</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="how-it-works-internally"><a href="#how-it-works-internally" class="headerlink" title="How It Works Internally"></a>How It Works Internally</h2><p>Every element in A-Frame inherits from <code>&lt;a-node&gt;</code>, the <code>AFRAME.ANode</code>
prototype. <code>ANode</code> controls load and initialization order. For an element to
initialize (whether it be <code>&lt;a-assets&gt;</code>, <code>&lt;a-asset-item&gt;</code>, <code>&lt;a-scene&gt;</code>, or
<code>&lt;a-entity&gt;</code>), its children must have already initialized. Nodes initialize
bottom up.</p>
<p><code>&lt;a-assets&gt;</code> is an <code>ANode</code>, and it waits for its children to load before
it loads. And since <code>&lt;a-assets&gt;</code> is a child of <code>&lt;a-scene&gt;</code>, the scene
effectively must wait for all assets to load. We also added extra load logic to
<code>&lt;a-entity&gt;</code> such that they explicitly wait for <code>&lt;a-assets&gt;</code> to load if we have
defined <code>&lt;a-assets&gt;</code>.</p>
<p><code>&lt;a-asset-item&gt;</code> uses <code>THREE.FileLoader</code> to fetch files. three.js stores the
returned data in <code>THREE.Cache</code>. Every three.js loader inherits from
<code>THREE.FileLoader</code>, whether they are a <code>ColladaLoader</code>, <code>OBJLoader</code>,
<code>ImageLoader</code>, etc. And they all have access and are aware of the central
<code>THREE.Cache</code>. If A-Frame already fetched a file, A-Frame won’t try to fetch it
again.</p>
<p>Thus, since we block entity initialization on assets, by the time entities
load, all assets will have been already fetched. As long as we define
<code>&lt;a-asset-item&gt;</code>s, and the entity is fetching files using some form
<code>THREE.FileLoader</code>, then caching will automatically work.</p>
<h2 id="accessing-the-fileloader-and-cache"><a href="#accessing-the-fileloader-and-cache" class="headerlink" title="Accessing the FileLoader and Cache"></a>Accessing the <code>FileLoader</code> and Cache</h2><p>To access the three.js <code>FileLoader</code> if we want to listen more closely:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.querySelector(<span class="string">'a-assets'</span>).fileLoader);</div></pre></td></tr></table></figure>
<p>To access the cache that stores XHR responses:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(THREE.Cache);</div></pre></td></tr></table></figure>

    

    <!-- Previous / Next navigation. -->
    <footer class="footer guide-links c">
      
      
        <span class="float-right">
          <a href="/docs/master/core/AFRAME.html" class="guide-link guide-link-right">AFRAME Globals →</a></span>
      
    </footer>

    <!--
	<footer class="footer footnote">
	  <p>Caught a mistake or want to contribute to the documentation? <br><br> <a href="https://github.com/techstart/TechStart-Site/edit/master/docs/core/asset-management-system.md" class="github-file-link" target="_blank" rel="external">Suggest an edit to this page on GitHub</a></p>
	</footer>
-->

  </div>
</div>

    </main>
    <script src="/js/common.js"></script>
    <script src="/js/ga.js"></script>
    <script src="/js/single-page.js"></script>
    
    
      <script src="/js/docs.js"></script>
    
  </body>
</html>
